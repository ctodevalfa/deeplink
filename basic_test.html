<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç deeplinks</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 30px;
            text-align: center;
        }
        .btn {
            display: inline-block;
            padding: 20px 40px;
            margin: 10px;
            font-size: 18px;
            background: #007AFF;
            color: white;
            text-decoration: none;
            border-radius: 10px;
            cursor: pointer;
            border: none;
        }
        .btn:active {
            background: #0056CC;
        }
        .status {
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .info { background: #e3f2fd; color: #1976d2; }
        .working { background: #e8f5e8; color: #2e7d32; }
    </style>
</head>
<body>
    <h1>üîß –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç deeplinks</h1>
    <p>–ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Ç–µ—Å—Ç –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π</p>
    
    <div id="status" class="status info">
        –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ iPhone
    </div>
    
    <h3>–¢–µ—Å—Ç 1: –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ (–∫–∞–∫ –æ–±—ã—á–Ω—ã–µ &lt;a&gt; —Ç–µ–≥–∏)</h3>
    <a href="sberbankonline://payments/p2p-by-phone-number?phoneNumber=79991234567" class="btn">
        sberbankonline://
    </a>
    
    <h3>–¢–µ—Å—Ç 2: JavaScript window.location.href (–∫–∞–∫ –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–º–µ—Ä–µ)</h3>
    <button class="btn" onclick="testScheme('sberbankonline')">
        sberbankonline:// (JS)
    </button>
    <button class="btn" onclick="testScheme('sbolonline')">
        sbolonline:// (JS)
    </button>
    
    <h3>–¢–µ—Å—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Å—Ö–µ–º (—Ü–µ–ø–æ—á–∫–∞ –∫–∞–∫ –≤ 3333)</h3>
    <button class="btn" onclick="autoTest()" style="background: #34C759; font-size: 20px;">
        üöÄ –ê–≤—Ç–æ—Ç–µ—Å—Ç –≤—Å–µ—Ö —Å—Ö–µ–º
    </button>
    
    <script>
        let currentIndex = 0;
        let testRunning = false;
        
        const schemes = [
            'sberbankonline',
            'sbolonline', 
            'iosappsmartonline',
            'budgetonline',
            'btripsexpenses'
        ];
        
        function setStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
        }
        
        function testScheme(scheme) {
            setStatus(`–¢–µ—Å—Ç–∏—Ä—É–µ–º ${scheme}...`, 'info');
            const url = `${scheme}://payments/p2p-by-phone-number?phoneNumber=79991234567`;
            console.log('–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞:', url);
            
            // –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
            window.location.href = url;
        }
        
        function autoTest() {
            if (testRunning) {
                setStatus('–¢–µ—Å—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω!', 'info');
                return;
            }
            
            testRunning = true;
            currentIndex = 0;
            setStatus('–ù–∞—á–∏–Ω–∞–µ–º –∞–≤—Ç–æ—Ç–µ—Å—Ç...', 'info');
            console.log('–ê–≤—Ç–æ—Ç–µ—Å—Ç: –Ω–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ–±–æ—Ä —Å—Ö–µ–º');
            
            testNextScheme();
        }
        
        function testNextScheme() {
            if (currentIndex >= schemes.length) {
                setStatus('–í—Å–µ —Å—Ö–µ–º—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã', 'working');
                testRunning = false;
                console.log('–ê–≤—Ç–æ—Ç–µ—Å—Ç: –≤—Å–µ —Å—Ö–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã');
                return;
            }
            
            const scheme = schemes[currentIndex++];
            const url = `${scheme}://payments/p2p-by-phone-number?phoneNumber=79991234567`;
            
            setStatus(`–ê–≤—Ç–æ—Ç–µ—Å—Ç: ${scheme} (${currentIndex}/${schemes.length})`, 'info');
            console.log(`–ê–≤—Ç–æ—Ç–µ—Å—Ç ${currentIndex}/${schemes.length}: ${url}`);
            
            // –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫–∞–∫ –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–º–µ—Ä–µ
            window.location.href = url;
            
            // –ï—Å–ª–∏ —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –º—ã –≤—Å–µ –µ—â–µ –∑–¥–µ—Å—å, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ö–µ–º—É
            setTimeout(() => {
                if (testRunning) {
                    console.log(`–°—Ö–µ–º–∞ ${scheme} –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â—É—é`);
                    testNextScheme();
                }
            }, 1500);
        }
        
        // –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º iOS
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        if (isIOS) {
            setStatus('‚úÖ iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ! –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.', 'working');
        } else {
            setStatus('‚ö†Ô∏è –≠—Ç–æ—Ç —Ç–µ—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è iOS', 'info');
        }
        
        console.log('–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:', isIOS ? 'iOS' : '–ù–µ iOS');
        console.log('User Agent:', navigator.userAgent);
    </script>
</body>
</html> 