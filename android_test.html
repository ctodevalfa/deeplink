<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ –¢–µ—Å—Ç Android –°—Ö–µ–º (–æ–±–Ω–æ–≤–ª–µ–Ω–æ) - Express Pay</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
        }
        
        .test-section {
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #38a169;
        }
        
        .scheme-list {
            background: #1a202c;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 11px;
            line-height: 1.6;
            overflow-x: auto;
            margin: 10px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .count-badge {
            background: #38a169;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin: 10px 0;
        }
        
        .platform-info {
            background: #e6fffa;
            border: 2px solid #38b2ac;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .update-info {
            background: #f0fff4;
            border: 2px solid #38a169;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .intent-highlight {
            background: #fed7e2;
            border: 1px solid #f56565;
            border-radius: 5px;
            padding: 3px 6px;
            font-weight: bold;
        }
        
        button {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ –¢–µ—Å—Ç Android –°—Ö–µ–º (–û–±–Ω–æ–≤–ª–µ–Ω–æ)</h1>
        
        <div class="update-info">
            <h3>üìã –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:</h3>
            <ul>
                <li>‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ <span class="intent-highlight">#Intent;scheme=https;end</span> –¥–ª—è Intent-—Å—Ö–µ–º</li>
                <li>‚úÖ –£—á—Ç–µ–Ω—ã –≤—Å–µ alias-—Å—Ö–µ–º—ã: sberbankonline, sbolonline, ios-app-smartonline, budgetonline-ios, btripsexpenses</li>
                <li>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è Android</li>
                <li>‚úÖ –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç Intent-—Å—Ö–µ–º–∞–º</li>
            </ul>
        </div>
        
        <div class="platform-info">
            <strong>User Agent:</strong> <span id="userAgent"></span><br>
            <strong>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> <span id="detectedPlatform"></span>
        </div>
        
        <div class="test-section">
            <h2>üì± –¢–µ—Å—Ç –¥–ª—è –°–±–µ—Ä–ë–∞–Ω–∫ (—Ç–µ–ª–µ—Ñ–æ–Ω)</h2>
            <button onclick="testSberPhone()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—ã –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞</button>
            <div class="count-badge" id="phoneCount">–°—Ö–µ–º—ã –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã</div>
            <div class="scheme-list" id="phoneSchemes">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...</div>
        </div>
        
        <div class="test-section">
            <h2>üí≥ –¢–µ—Å—Ç –¥–ª—è –°–±–µ—Ä–ë–∞–Ω–∫ (–∫–∞—Ä—Ç–∞)</h2>
            <button onclick="testSberCard()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—ã –¥–ª—è –∫–∞—Ä—Ç—ã</button>
            <div class="count-badge" id="cardCount">–°—Ö–µ–º—ã –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã</div>
            <div class="scheme-list" id="cardSchemes">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...</div>
        </div>
        
        <div class="test-section">
            <h2>üåç –¢–µ—Å—Ç —Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤</h2>
            <button onclick="testSberTrans()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—ã –¥–ª—è —Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–∫–∏</button>
            <div class="count-badge" id="transCount">–°—Ö–µ–º—ã –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã</div>
            <div class="scheme-list" id="transSchemes">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...</div>
        </div>
        
        <div class="test-section">
            <h2>üè¶ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ iOS vs Android</h2>
            <button onclick="comparePlatforms()">–°—Ä–∞–≤–Ω–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</button>
            <div id="comparison"></div>
        </div>
        
        <div class="test-section">
            <h2>üîç –ê–Ω–∞–ª–∏–∑ Intent-—Å—Ö–µ–º</h2>
            <button onclick="analyzeIntentSchemes()">–ù–∞–π—Ç–∏ Intent-—Å—Ö–µ–º—ã</button>
            <div id="intentAnalysis"></div>
        </div>
    </div>

    <script type="module">
        import { generateDeepLinks } from './deep.js';
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
        document.getElementById('userAgent').textContent = navigator.userAgent;
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
        function detectPlatform() {
            return /iPhone|iPad|iPod/i.test(navigator.userAgent) ? 'ios' : 'android';
        }
        
        document.getElementById('detectedPlatform').textContent = detectPlatform();
        
        function highlightIntentSchemes(links) {
            return links.map((link, i) => {
                const isIntent = link.includes('#Intent;scheme=https;end');
                const isAndroidApp = link.includes('android-app://');
                const style = isIntent ? 'color: #f56565; font-weight: bold;' : 
                             isAndroidApp ? 'color: #ed8936; font-weight: bold;' : '';
                const marker = isIntent ? 'üéØ ' : isAndroidApp ? 'üì± ' : '';
                return `<div style="${style}"><strong>${i + 1}.</strong> ${marker}${link}</div>`;
            }).join('');
        }
        
        window.testSberPhone = function() {
            try {
                const links = generateDeepLinks({
                    phone: '79991234567',
                    amount: 1500,
                    bank: 'ru_sberbank',
                    platform: 'android' // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ Android
                });
                
                document.getElementById('phoneCount').textContent = `–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ${links.length} —Å—Ö–µ–º`;
                document.getElementById('phoneSchemes').innerHTML = highlightIntentSchemes(links);
                
                console.log('Android Phone Links:', links);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('phoneSchemes').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
            }
        };
        
        window.testSberCard = function() {
            try {
                const links = generateDeepLinks({
                    phone: '2202200623456789', // 16-–∑–Ω–∞—á–Ω–∞—è –∫–∞—Ä—Ç–∞
                    amount: 2500,
                    bank: 'ru_sberbank',
                    platform: 'android'
                });
                
                document.getElementById('cardCount').textContent = `–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ${links.length} —Å—Ö–µ–º`;
                document.getElementById('cardSchemes').innerHTML = highlightIntentSchemes(links);
                
                console.log('Android Card Links:', links);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('cardSchemes').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
            }
        };
        
        window.testSberTrans = function() {
            try {
                const links = generateDeepLinks({
                    phone: '79991234567',
                    amount: 1000,
                    bank: 'ru_sberbank_trans',
                    platform: 'android'
                });
                
                document.getElementById('transCount').textContent = `–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ${links.length} —Å—Ö–µ–º`;
                document.getElementById('transSchemes').innerHTML = highlightIntentSchemes(links);
                
                console.log('Android Trans Links:', links);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('transSchemes').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
            }
        };
        
        window.comparePlatforms = function() {
            try {
                const iosLinks = generateDeepLinks({
                    phone: '79991234567',
                    amount: 1500,
                    bank: 'ru_sberbank',
                    platform: 'ios'
                });
                
                const androidLinks = generateDeepLinks({
                    phone: '79991234567',
                    amount: 1500,
                    bank: 'ru_sberbank',
                    platform: 'android'
                });
                
                const comparisonHtml = `
                    <div class="comparison-grid">
                        <div>
                            <h4>üì± iOS (${iosLinks.length} —Å—Ö–µ–º)</h4>
                            <div class="scheme-list">
                                ${iosLinks.map((link, i) => `<div><strong>${i + 1}.</strong> ${link}</div>`).join('')}
                            </div>
                        </div>
                        <div>
                            <h4>ü§ñ Android (${androidLinks.length} —Å—Ö–µ–º)</h4>
                            <div class="scheme-list">
                                ${highlightIntentSchemes(androidLinks)}
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('comparison').innerHTML = comparisonHtml;
                
                console.log('–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:');
                console.log('iOS Links:', iosLinks);
                console.log('Android Links:', androidLinks);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('comparison').innerHTML = '–û—à–∏–±–∫–∞: ' + error.message;
            }
        };
        
        window.analyzeIntentSchemes = function() {
            try {
                const links = generateDeepLinks({
                    phone: '79991234567',
                    amount: 1500,
                    bank: 'ru_sberbank',
                    platform: 'android'
                });
                
                const intentSchemes = links.filter(link => link.includes('#Intent;scheme=https;end'));
                const androidAppSchemes = links.filter(link => link.includes('android-app://'));
                const crossPlatformSchemes = links.filter(link => 
                    !link.includes('#Intent;scheme=https;end') && 
                    !link.includes('android-app://') &&
                    !link.includes('sberbankonline://payments/p2p?type=')
                );
                
                const analysisHtml = `
                    <div style="margin: 20px 0;">
                        <h4 style="color: #f56565;">üéØ Intent-—Å—Ö–µ–º—ã (#Intent;scheme=https;end): ${intentSchemes.length}</h4>
                        <div class="scheme-list">
                            ${intentSchemes.map((link, i) => `<div style="color: #f56565;"><strong>${i + 1}.</strong> ${link}</div>`).join('') || '<div>–ù–µ—Ç Intent-—Å—Ö–µ–º</div>'}
                        </div>
                        
                        <h4 style="color: #ed8936;">üì± Android App —Å—Ö–µ–º—ã: ${androidAppSchemes.length}</h4>
                        <div class="scheme-list">
                            ${androidAppSchemes.map((link, i) => `<div style="color: #ed8936;"><strong>${i + 1}.</strong> ${link}</div>`).join('') || '<div>–ù–µ—Ç Android App —Å—Ö–µ–º</div>'}
                        </div>
                        
                        <h4 style="color: #38a169;">üîÑ –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã: ${crossPlatformSchemes.length}</h4>
                        <div class="scheme-list">
                            ${crossPlatformSchemes.map((link, i) => `<div style="color: #38a169;"><strong>${i + 1}.</strong> ${link}</div>`).join('') || '<div>–ù–µ—Ç –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Å—Ö–µ–º</div>'}
                        </div>
                    </div>
                `;
                
                document.getElementById('intentAnalysis').innerHTML = analysisHtml;
                
                console.log('–ê–Ω–∞–ª–∏–∑ —Å—Ö–µ–º:');
                console.log('Intent —Å—Ö–µ–º—ã:', intentSchemes);
                console.log('Android App —Å—Ö–µ–º—ã:', androidAppSchemes);
                console.log('–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã:', crossPlatformSchemes);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('intentAnalysis').innerHTML = '–û—à–∏–±–∫–∞: ' + error.message;
            }
        };
    </script>
</body>
</html> 