<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  
  <!-- –ó–∞–ø—Ä–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ deeplinks -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <meta name="description" content="Express Pay - –ë—ã—Å—Ç—Ä—ã–µ P2P –ø–µ—Ä–µ–≤–æ–¥—ã —á–µ—Ä–µ–∑ –°–ë–ü. –°–æ–∑–¥–∞–Ω–∏–µ deeplink —Å—Å—ã–ª–æ–∫ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤." />
  <meta name="keywords" content="–°–ë–ü, P2P –ø–µ—Ä–µ–≤–æ–¥—ã, –±—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏, –°–±–µ—Ä–ë–∞–Ω–∫, –¢–∏–Ω—å–∫–æ—Ñ—Ñ, –í–¢–ë, deeplinks" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Express Pay - –ë—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏" />
  <meta property="og:description" content="–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ P2P –ø–µ—Ä–µ–≤–æ–¥—ã —á–µ—Ä–µ–∑ –°–ë–ü. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –∫—Ä—É–ø–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ –†–æ—Å—Å–∏–∏." />
  <meta property="og:image" content="./images/favicon.svg" />
  <meta property="og:url" content="https://express-pay.io" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Express Pay - –ë—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏" />
  <meta name="twitter:description" content="–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ P2P –ø–µ—Ä–µ–≤–æ–¥—ã —á–µ—Ä–µ–∑ –°–ë–ü" />
  <meta name="twitter:image" content="./images/favicon.svg" />
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <!-- –§–∞–≤–∏–∫–æ–Ω–∫–∏ –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ -->
  <link rel="icon" type="image/svg+xml" href="./images/favicon.svg" />
  <link rel="icon" type="image/svg+xml" href="./images/logo.svg" />
  <link rel="apple-touch-icon" href="./images/favicon.svg" />
  <title>Express Pay - –ë—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏</title>
  <style>
    :root {
      --bg: #f8fafc;
      --card-bg: #ffffff;
      --border: #e2e8f0;
      --text: #0f172a;
      --text-muted: #64748b;
      --primary: #2563eb;
      --primary-hover: #1d4ed8;
      --success: #059669;
      --fintech-gradient: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      --fintech-accent: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
      --fintech-neutral: linear-gradient(135deg, #64748b 0%, #475569 100%);
      --radius: 16px;
      --radius-sm: 8px;
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 8px 24px rgba(0, 0, 0, 0.12);
    }

    * {
      box-sizing: border-box;
    }

    /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è iOS Safari */
    html {
      height: 100%;
      -webkit-text-size-adjust: 100%;
    }

    body {
      position: relative;
      height: auto;
      min-height: 100%;
    }

    /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑—É–º–∞ –Ω–∞ iOS */
    input, select, textarea {
      font-size: 16px !important;
    }

    /* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –≤—ã—Å–æ—Ç—ã viewport –Ω–∞ iOS */
    @supports (-webkit-touch-callout: none) {
      body {
        min-height: calc(var(--vh, 1vh) * 100);
      }
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: 
        radial-gradient(circle at 20% 80%, rgba(37, 99, 235, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(29, 78, 216, 0.02) 0%, transparent 50%),
        linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding-top: 40px;
      -webkit-overflow-scrolling: touch;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        repeating-linear-gradient(
          45deg,
          transparent,
          transparent 2px,
          rgba(37, 99, 235, 0.01) 2px,
          rgba(37, 99, 235, 0.01) 4px
        );
      pointer-events: none;
      z-index: -1;
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      width: 100%;
      max-width: 440px;
      padding: 40px 32px;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        0 4px 16px rgba(0, 0, 0, 0.04),
        0 0 0 1px rgba(255, 255, 255, 0.8);
      position: relative;
      backdrop-filter: blur(10px);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--fintech-gradient);
      border-radius: var(--radius) var(--radius) 0 0;
    }

    .brand-header {
      text-align: center;
      margin-bottom: 32px;
      position: relative;
    }

    .brand-header svg {
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      transition: transform 0.2s ease;
    }

    .brand-header svg:hover {
      transform: scale(1.02);
    }

    .brand-logo {
      font-size: 24px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 8px;
      letter-spacing: -0.01em;
      position: relative;
    }

    .field-label-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .inline-timer {
      background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
      border: 1px solid #d1e7ff;
      border-radius: 6px;
      padding: 4px 8px;
      display: none;
      text-align: center;
    }

    .inline-timer-text {
      font-size: 14px;
      font-weight: 600;
      color: var(--primary);
      font-family: 'Inter', monospace;
      letter-spacing: 0.5px;
      margin-right: 4px;
    }

    .inline-timer-label {
      font-size: 10px;
      color: var(--text-muted);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.2px;
    }

    .inline-timer.timer-expired {
      background: linear-gradient(135deg, #ffe6e6 0%, #ffcccc 100%);
      border-color: #ff9999;
      animation: timer-expired 0.5s infinite alternate;
    }

    .inline-timer.timer-expired .inline-timer-text {
      color: #dc3545;
    }

    .inline-timer.timer-expired .inline-timer-label {
      color: #dc3545;
    }

    .footer {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      text-align: center;
    }

    .security-info {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .security-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .security-icon {
      font-size: 14px;
      opacity: 0.8;
    }

    .footer-text {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.4;
      max-width: 300px;
      margin: 0 auto;
    }





    .conversion-cta {
      background: var(--fintech-gradient);
      color: white;
      border: none;
      padding: 16px 24px;
      font-size: 16px;
      font-weight: 600;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: var(--shadow);
      letter-spacing: -0.01em;
      position: relative;
      overflow: hidden;
      text-transform: none;
    }

    .conversion-cta:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-lg);
      background: var(--primary-hover);
    }

    .progress-indicator {
      background: #e9ecef;
      height: 4px;
      border-radius: 2px;
      margin: 16px 0;
      overflow: hidden;
      position: relative;
    }

    .progress-bar {
      height: 100%;
      background: var(--fintech-gradient);
      border-radius: 2px;
      transition: width 0.5s ease;
      position: relative;
    }

    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: progress-shine 2s infinite;
    }

    @keyframes progress-shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    @keyframes pulse-ready {
      0%, 100% { 
        transform: scale(1);
        box-shadow: var(--shadow);
      }
      50% { 
        transform: scale(1.02);
        box-shadow: var(--shadow-lg);
      }
    }

    .payment-timer {
      background: #f8fafc;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 16px 20px;
      margin: 20px 0;
      text-align: center;
      display: none;
    }

    .timer-display {
      font-size: 28px;
      font-weight: 600;
      color: var(--text);
      font-family: 'Inter', monospace;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .timer-label {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 500;
      text-transform: none;
      letter-spacing: 0;
    }

    .timer-expired {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      border-color: #dc3545;
      animation: timer-expired 0.5s infinite alternate;
    }

    .timer-expired .timer-display {
      color: white;
    }

    .timer-expired .timer-label {
      color: #ffcccb;
    }

    @keyframes timer-pulse {
      0% { transform: scale(1); }
      100% { transform: scale(1.02); }
    }

    @keyframes timer-expired {
      0% { opacity: 1; }
      100% { opacity: 0.7; }
    }



    h1 {
      font-size: 26px;
      font-weight: 700;
      margin: 0 0 28px;
      text-align: center;
      color: var(--text);
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è readonly —Ä–µ–∂–∏–º–∞ */
    .readonly-mode h1 {
      font-size: 22px;
      margin: 0 0 20px;
    }

    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –±–∞–Ω–∫–æ–≤ –≤ readonly —Ä–µ–∂–∏–º–µ */
    .readonly-mode .banks {
      margin-top: 16px;
    }

    .readonly-mode .bank-btn {
      padding: 12px 16px;
      margin-bottom: 8px;
    }

    .readonly-mode .bank-btn-content {
      font-size: 15px;
    }

    .field-group {
      margin-bottom: 20px;
    }

    .field-label {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
      color: var(--text);
      letter-spacing: -0.01em;
    }

    input, select {
      width: 100%;
      padding: 16px 20px;
      font-size: 16px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      background: #fff;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: inherit;
      font-weight: 500;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(29, 161, 242, 0.1);
      transform: translateY(-1px);
      animation: input-glow 0.3s ease;
    }

    @keyframes input-glow {
      0% { box-shadow: 0 0 0 0 rgba(29, 161, 242, 0.4); }
      100% { box-shadow: 0 0 0 4px rgba(29, 161, 242, 0.1); }
    }

    input::placeholder {
      color: var(--text-muted);
      font-weight: 400;
    }

    input:disabled, select:disabled {
      background: #f8f9fa;
      color: #6c757d;
      border-color: #e9ecef;
      cursor: not-allowed;
    }

    input:disabled::placeholder {
      color: #adb5bd;
    }

    /* Readonly –ø–æ–ª—è */
    .readonly-field {
      margin-bottom: 16px;
    }

    .readonly-value-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 12px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
    }

    .readonly-value {
      flex: 1;
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
      word-break: break-all;
    }

    .copy-btn {
      background: transparent;
      border: none;
      color: var(--text-muted);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 4px 8px;
      border-radius: 4px;
      font-weight: 500;
      text-decoration: underline;
      text-underline-offset: 2px;
    }

    .copy-btn:hover {
      color: var(--primary);
      background: rgba(37, 99, 235, 0.05);
    }

    .copy-btn:active {
      transform: scale(0.98);
    }

    /* checkbox component */
    .checkbox-wrapper {
      margin: 20px 0 28px;
    }
    
    .checkbox-container {
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      user-select: none;
      position: relative;
      padding: 12px 16px;
      border-radius: 12px;
      transition: background-color 0.2s ease;
    }
    
    .checkbox-container:hover {
      background-color: #f8fafc;
    }
    
    .checkbox-container input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin: 0;
      margin-right: 12px;
      cursor: pointer;
      accent-color: var(--primary);
      transform: scale(1.1);
    }
    
    .checkbox-container span {
      font-size: 15px;
      color: var(--text);
      line-height: 1.4;
      font-weight: 500;
    }

    #generate-btn {
      width: 100%;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
      color: #fff;
      border: none;
      padding: 16px 24px;
      font-size: 16px;
      font-weight: 700;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow-lg);
      letter-spacing: -0.01em;
      position: relative;
      overflow: hidden;
    }

    #generate-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    #generate-btn:hover::before {
      left: 100%;
    }

    #generate-btn:hover { 
      transform: translateY(-2px);
      box-shadow: var(--shadow-xl);
    }

    #generate-btn:active {
      transform: translateY(0);
    }

    .banks {
      margin-top: 32px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .bank-btn {
      padding: 0;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow);
      overflow: hidden;
      background: linear-gradient(135deg, #fff 0%, #fafbfc 100%);
      width: 100%;
      height: 72px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bank-btn-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      height: 100%;
      padding: 12px 16px;
    }

    .bank-btn-text {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      white-space: nowrap;
      letter-spacing: -0.01em;
    }

    .bank-btn:hover { 
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(29, 161, 242, 0.15);
      border-color: var(--primary);
      background: linear-gradient(135deg, #fff 0%, #f0f8ff 100%);
    }

    .bank-btn::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(29, 161, 242, 0.1), transparent);
      transition: left 0.5s;
    }

    .bank-btn:hover::after {
      left: 100%;
    }

    .bank-btn:active {
      transform: translateY(-1px);
      box-shadow: var(--shadow-lg);
    }

    /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    .bank-btn:focus {
      outline: none;
      border-color: var(--primary);
    }

    /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–ª–µ–º—É —Å –¥–≤–æ–π–Ω—ã–º –Ω–∞–∂–∞—Ç–∏–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    @media (hover: none) and (pointer: coarse) {
      .bank-btn:hover {
        transform: none;
        box-shadow: var(--shadow);
        border-color: var(--border);
        background: linear-gradient(135deg, #fff 0%, #fafbfc 100%);
      }
      
      .bank-btn:hover::after {
        left: -100%;
      }
      
      .bank-btn:active {
        transform: scale(0.98);
        background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
        border-color: var(--primary);
      }
    }

    .bank-btn object {
      height: 36px;
      width: auto;
      max-width: 100px;
      display: block;
      pointer-events: none;
      object-fit: contain;
      flex-shrink: 0;
    }



    .hints-container {
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
    }

    .hint {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 12px;
      text-align: center;
      font-weight: 500;
      line-height: 1.4;
    }

    .hint:last-child {
      margin-bottom: 0;
    }

    .hint-small {
      font-size: 12px;
      color: #999;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    code {
      background: #f1f3f4;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
      font-size: 11px;
      color: #333;
      white-space: nowrap;
      margin: 0 2px;
    }

    @media (max-width: 480px) {
      body {
        padding: 16px;
        padding-top: 20px;
        min-height: 100vh;
        min-height: -webkit-fill-available;
      }
      
      .card {
        padding: 32px 24px;
        max-width: 100%;
        border-radius: var(--radius-sm);
        margin-bottom: 20px;
      }
      
      .banks {
        grid-template-columns: 1fr;
        gap: 16px;
        margin-top: 24px;
      }
      
      .bank-btn {
        height: 64px;
      }

      .bank-btn-content {
        padding: 10px 12px;
        gap: 10px;
      }

      .bank-btn-text {
        font-size: 14px;
      }

      .bank-btn object {
        height: 32px;
        max-width: 90px;
      }
      
      h1 {
        font-size: 24px;
        margin-bottom: 24px;
      }
      
      input, select {
        padding: 14px 16px;
        font-size: 16px;
      }
      
      .field-group {
        margin-bottom: 16px;
      }
      
      .hints-container {
        margin-top: 20px;
        padding-top: 16px;
      }
      
      .hint {
        font-size: 12px;
      }
      
      .hint-small {
        font-size: 11px;
        line-height: 1.3;
      }
      
      code {
        font-size: 10px;
        padding: 1px 4px;
        margin: 0 1px;
      }

      .trust-indicators {
        gap: 8px;
        margin: 12px 0 20px;
      }

      .trust-badge {
        font-size: 11px;
        padding: 4px 8px;
      }





      .conversion-cta {
        padding: 16px 20px;
        font-size: 16px;
      }

      .payment-timer {
        padding: 12px 16px;
        margin: 16px 0;
      }

      .timer-display {
        font-size: 28px;
        letter-spacing: 1px;
        margin-bottom: 6px;
      }

      .timer-label {
        font-size: 12px;
      }

      /* –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è readonly —Ä–µ–∂–∏–º–∞ */
      .readonly-mode {
        padding: 16px 12px !important;
      }

      .readonly-mode .brand-header {
        margin-bottom: 16px !important;
      }

      .readonly-mode .brand-header svg {
        width: 200px !important;
        height: 57px !important;
      }

      .readonly-mode h1 {
        font-size: 20px !important;
        margin-bottom: 16px !important;
      }

      .readonly-mode .readonly-field {
        margin-bottom: 12px;
      }

      .readonly-mode .readonly-value-container {
        padding: 10px 12px;
        gap: 8px;
      }

      .readonly-mode .readonly-value {
        font-size: 15px;
      }

      .readonly-mode .copy-btn {
        font-size: 13px;
        padding: 2px 6px;
      }

      .readonly-mode .bank-btn {
        padding: 10px 12px;
        margin-bottom: 6px;
      }

      .readonly-mode .bank-btn-content {
        font-size: 14px;
      }

      .field-label-container {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .inline-timer {
        padding: 3px 6px;
        align-self: flex-end;
      }

      .inline-timer-text {
        font-size: 12px;
        letter-spacing: 0.3px;
        margin-right: 3px;
      }

      .inline-timer-label {
        font-size: 9px;
        letter-spacing: 0.1px;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="brand-header">
      <svg width="240" height="68" viewBox="0 0 280 80" xmlns="http://www.w3.org/2000/svg" style="display: block; margin: 0 auto;">
        <defs>
          <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00b956"/>
            <stop offset="100%" stop-color="#007f3e"/>
          </linearGradient>
        </defs>

        <!-- –ò–∫–æ–Ω–∫–∞ (—Å—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ –≤ –∫—Ä—É–≥–µ) -->
        <circle cx="40" cy="40" r="30" fill="url(#grad)" />
        <path d="M32 28 L45 40 L32 52" fill="none" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />

        <!-- –¢–µ–∫—Å—Ç: Express Pay -->
        <text x="80" y="46" font-family="Inter, Segoe UI, Roboto, sans-serif" font-size="28" fill="#003f2d" font-weight="600">
          Express Pay
        </text>

        <!-- –ü–æ–¥–ø–∏—Å—å: –∞–¥—Ä–µ—Å —Å–∞–π—Ç–∞ -->
        <text x="80" y="66" font-family="Inter, Segoe UI, Roboto, sans-serif" font-size="14" fill="#6c757d">
          express-pay.io
        </text>
      </svg>
    </div>


    
    <h1 id="form-title">–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã</h1>

    <div class="progress-indicator" id="progress-indicator" style="display: none;">
      <div class="progress-bar" id="progress-bar" style="width: 0%;"></div>
    </div>

    <div class="field-group">
      <label class="field-label" for="purpose">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</label>
      <input id="purpose" type="text" placeholder="–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥, —Ç–æ–≤–∞—Ä–æ–≤..." />
    </div>

    <div class="field-group">
      <label class="field-label" for="account">–¢–µ–ª–µ—Ñ–æ–Ω ¬´+7‚Ä¶¬ª –∏–ª–∏ ‚Ññ –∫–∞—Ä—Ç—ã</label>
      <input id="account" type="text" placeholder="+7 999 123-45-67" />
    </div>

    <div class="field-group">
      <label class="field-label" for="amount">–°—É–º–º–∞, ‚ÇΩ</label>
      <input id="amount" type="number" step="0.01" placeholder="1000.00" />
    </div>

    <div class="field-group">
      <label class="field-label" for="tinkoff-member">bankMemberId (Tinkoff)</label>
      <select id="tinkoff-member">
        <option value="10076">10076 ‚Äì –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
        <option value="10075">10075</option>
        <option value="10074">10074</option>
      </select>
    </div>

    <div class="field-group">
      <label class="field-label" for="payment-timer">–í—Ä–µ–º—è –Ω–∞ –æ–ø–ª–∞—Ç—É</label>
      <select id="payment-timer">
        <option value="0">–ë–µ–∑ —Ç–∞–π–º–µ—Ä–∞</option>
        <option value="5">5 –º–∏–Ω—É—Ç</option>
        <option value="10">10 –º–∏–Ω—É—Ç</option>
        <option value="15" selected>15 –º–∏–Ω—É—Ç</option>
        <option value="30">30 –º–∏–Ω—É—Ç</option>
        <option value="60">1 —á–∞—Å</option>
      </select>
    </div>

    <div class="checkbox-wrapper">
      <label class="checkbox-container" for="transborder">
        <input id="transborder" type="checkbox" />
        <span>–¢—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (—Ç–æ–ª—å–∫–æ –¥–ª—è –°–±–µ—Ä–∞)</span>
      </label>
    </div>

    

    <button id="generate-btn" class="conversion-cta">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É</button>

    <div class="payment-timer" id="payment-timer-display">
      <div class="timer-display" id="timer-display">15:00</div>
      <div class="timer-label">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É</div>
    </div>



    <button id="copy-link-btn" style="margin-top: 8px; padding: 8px 16px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; color: #6c757d; font-size: 14px; cursor: pointer; display: none;">
      üîí –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å read-only —Å—Å—ã–ª–∫—É
    </button>

    <div class="banks" id="banks"></div>
    

    
    <div class="hints-container">
      <div class="hint" id="device-hint">üîê –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –±–∞–Ω–∫–æ–≤</div>
      
      <div class="hint hint-small">
        üí° URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: <code>purpose</code>, <code>phone</code>, <code>amount</code>, <code>bankMemberId</code>, <code>timer</code>, <code>transborder</code>, <code>disable</code>
      </div>
      

    </div>

    <div class="footer">
      <div class="security-info">
        <div class="security-item">
          <span class="security-icon">üîê</span>
          <span>SSL —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</span>
        </div>
        <div class="security-item">
          <span class="security-icon">üè¶</span>
          <span>–ë–∞–Ω–∫ –†–æ—Å—Å–∏–∏</span>
        </div>
        <div class="security-item">
          <span class="security-icon">‚ö°</span>
          <span>–°–ë–ü –ø—Ä–æ—Ç–æ–∫–æ–ª</span>
        </div>
      </div>
      <div class="footer-text">
        –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ API –±–∞–Ω–∫–æ–≤
      </div>
    </div>
  </div>

  <script type="module">
    import { generateDeepLinks, generateDesktopLink } from './deep.js?v=20241225';

    const BANKS = {
      ru_tinkoff: { label: 'T-Pay', css: 'tinkoff', icon: './images/t_pay.svg' },
      ru_sberbank: { 
        label: 'SberPay', 
        css: 'sber', 
        icon: './images/sber_pay.svg',
        // ‚úÖ –†–∞–±–æ—á–∞—è —Å—Ö–µ–º–∞: ios-app-smartonline://sbolonline/payments/p2p-by-phone-number?phoneNumber=...
        // ‚ùó –°—É–º–º–∞ –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
      },
      ru_vtb: { label: 'VTB Pay', css: 'vtb', icon: './images/vtb_pay.svg' }
    };

    const $purpose = document.getElementById('purpose');
    const $account = document.getElementById('account');
    const $amount = document.getElementById('amount');
    const $tinkoffMember = document.getElementById('tinkoff-member');
    const $paymentTimer = document.getElementById('payment-timer');
    const $transborder = document.getElementById('transborder');
    const $banksWrap = document.getElementById('banks');
    const $hint = document.getElementById('device-hint');
    const $copyLinkBtn = document.getElementById('copy-link-btn');
    const $formTitle = document.getElementById('form-title');
    const $timerDisplay = document.getElementById('payment-timer-display');
    const $timerText = document.getElementById('timer-display');
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç–∞–π–º–µ—Ä–∞
    function getInlineTimer() {
      return document.getElementById('inline-timer-display');
    }
    
    function getInlineTimerText() {
      return document.getElementById('inline-timer-text');
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    function getDeviceInfo() {
      const ua = navigator.userAgent;
      const isIOS = /iPhone|iPad|iPod/i.test(ua);
      const isAndroid = /Android/i.test(ua);
      const isMobile = isIOS || isAndroid || /Mobile|Tablet/i.test(ua);
      
      return {
        isIOS,
        isAndroid,
        isMobile,
        platform: isIOS ? 'ios' : isAndroid ? 'android' : 'desktop'
      };
    }





    // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ desktop
    function showDesktopInfo(params) {
      // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      `;

      modal.innerHTML = `
        <div style="background: white; padding: 32px; border-radius: 16px; text-align: center; max-width: 400px; box-shadow: 0 20px 40px rgba(0,0,0,0.3);">
          <div style="font-size: 48px; margin-bottom: 16px;">üì±</div>
          <h3 style="margin: 0 0 16px 0; color: #333;">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</h3>
          <p style="color: #666; font-size: 14px; margin: 16px 0; line-height: 1.5;">
            P2P –ø–µ—Ä–µ–≤–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤. 
            –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞.
          </p>
                     <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin: 16px 0;">
             <p style="color: #666; font-size: 13px; margin: 0;">
               <strong>–°—É–º–º–∞:</strong> ${params.amount} ‚ÇΩ<br>
               <strong>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</strong> ${params.phone.startsWith('+') ? params.phone : '+' + params.phone}
             </p>
           </div>
          <button id="close-info" style="background: #007AFF; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px;">
            –ü–æ–Ω—è—Ç–Ω–æ
          </button>
        </div>
      `;

      document.body.appendChild(modal);

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
      modal.querySelector('#close-info').onclick = () => modal.remove();
      modal.onclick = (e) => {
        if (e.target === modal) modal.remove();
      };
    }



    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    function updateDeviceHint() {
      const device = getDeviceInfo();
      if (device.platform === 'desktop') {
        $hint.textContent = '–ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ: –í–¢–ë –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.';
      } else if (device.isIOS) {
        $hint.textContent = '–ù–∞ iOS: deeplink-—ã –±—É–¥—É—Ç –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.';
      } else if (device.isAndroid) {
        $hint.textContent = '–ù–∞ Android: deeplink-—ã –±—É–¥—É—Ç –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.';
      } else {
        $hint.textContent = '–ó–∞–ø—É—Å–∫ deeplink-–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ HTTP-—Å–µ—Ä–≤–µ—Ä.';
      }
    }

    // –†–∞–±–æ—Ç–∞ —Å URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    function getUrlParams() {
      const params = new URLSearchParams(window.location.search);
      return {
        purpose: params.get('purpose') || '',
        phone: params.get('phone') || params.get('account') || '',
        amount: params.get('amount') || '',
        bankMemberId: params.get('bankMemberId') || params.get('member') || '10076',
        timer: params.get('timer') || '15',
        transborder: params.get('transborder') === 'true' || params.get('transborder') === '1',
        disable: params.get('disable') === 'true' || params.get('disable') === '1'
      };
    }

    function updateUrlParams() {
      const params = new URLSearchParams();
      
      const purpose = $purpose.value.trim();
      const phone = $account.value.trim();
      const amount = $amount.value.trim();
      const bankMemberId = $tinkoffMember.value;
      const timer = $paymentTimer.value;
      const transborder = $transborder.checked;

      if (purpose) params.set('purpose', purpose);
      if (phone) params.set('phone', phone);
      if (amount) params.set('amount', amount);
      if (bankMemberId !== '10076') params.set('bankMemberId', bankMemberId);
      if (timer !== '15') params.set('timer', timer);
      if (transborder) params.set('transborder', 'true');

      const newUrl = params.toString() ? 
        `${window.location.pathname}?${params.toString()}` : 
        window.location.pathname;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º URL –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      window.history.replaceState({}, '', newUrl);

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
      updateCopyLinkButton(phone, amount);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
      if (!getUrlParams().disable) {
        updateFormTitle({ disable: false, purpose: purpose });
      }
    }

    function updateCopyLinkButton(phone, amount) {
      const params = getUrlParams();
      // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ read-only —Ä–µ–∂–∏–º–µ
      if (params.disable) {
        $copyLinkBtn.style.display = 'none';
        return;
      }
      
      if (phone && amount) {
        $copyLinkBtn.style.display = 'block';
      } else {
        $copyLinkBtn.style.display = 'none';
      }
    }

    async function copyCurrentLink() {
      // –°–æ–∑–¥–∞–µ–º URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º disable=true
      const url = new URL(window.location.href);
      url.searchParams.set('disable', 'true');
      const disabledUrl = url.toString();
      
      try {
        await navigator.clipboard.writeText(disabledUrl);
        
        // –í—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        const originalText = $copyLinkBtn.textContent;
        $copyLinkBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        $copyLinkBtn.style.background = '#d4edda';
        $copyLinkBtn.style.color = '#155724';
        
        setTimeout(() => {
          $copyLinkBtn.textContent = originalText;
          $copyLinkBtn.style.background = '#f8f9fa';
          $copyLinkBtn.style.color = '';
        }, 2000);
        
        console.log('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞:', disabledUrl);
      } catch (err) {
        console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:', err);
        
        // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
        const textArea = document.createElement('textarea');
        textArea.value = disabledUrl;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        $copyLinkBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        setTimeout(() => {
          $copyLinkBtn.textContent = 'üîí –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å read-only —Å—Å—ã–ª–∫—É';
        }, 2000);
      }
    }

    function fillFormFromUrl() {
      const params = getUrlParams();
      
      if (params.purpose) {
        $purpose.value = params.purpose;
      }
      if (params.phone) {
        $account.value = params.phone;
      }
      if (params.amount) {
        $amount.value = params.amount;
      }
      if (params.bankMemberId) {
        $tinkoffMember.value = params.bankMemberId;
      }
      if (params.timer) {
        $paymentTimer.value = params.timer;
      }
      if (params.transborder) {
        $transborder.checked = params.transborder;
      }

      // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
      updateFormTitle(params);

      // –ü—Ä–∏–º–µ–Ω—è–µ–º disabled —Ä–µ–∂–∏–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
      if (params.disable) {
        applyDisabledMode();
      }

      // –ï—Å–ª–∏ –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
      if (params.phone && params.amount) {
        console.log('–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:', params);
        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        setTimeout(() => {
          document.getElementById('generate-btn').click();
        }, 100);
      }
    }

    function updateFormTitle(params) {
      if (params.disable && params.purpose) {
        // Read-only —Ä–µ–∂–∏–º —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–ª–∞—Ç–µ–∂–∞
        $formTitle.textContent = params.purpose;
      } else if (params.disable) {
        // Read-only —Ä–µ–∂–∏–º –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
        $formTitle.textContent = '–û–ø–ª–∞—Ç–∞';
      } else if (params.purpose) {
        // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º
        $formTitle.textContent = `–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã: ${params.purpose}`;
      } else {
        // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ä–º—ã
        $formTitle.textContent = '–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã';
      }
    }

    function applyDisabledMode() {
      // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ñ–æ—Ä–º—É –≤ –∫—Ä–∞—Å–∏–≤—ã–π readonly —Ä–µ–∂–∏–º
      convertFormToReadonly();
      
      // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è
      $tinkoffMember.parentElement.style.display = 'none';
      
      // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
      document.getElementById('generate-btn').style.display = 'none';
      $copyLinkBtn.style.display = 'none';
      
      // –°–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –æ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
      document.querySelector('.hints-container').style.display = 'none';
      
      // –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã –≤ readonly —Ä–µ–∂–∏–º–µ
      document.getElementById('progress-indicator').style.display = 'none';
      document.getElementById('payment-timer-display').style.display = 'none';
      document.querySelector('.footer').style.display = 'none';
      
      // –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è readonly —Ä–µ–∂–∏–º–∞
      document.querySelector('.card').classList.add('readonly-mode');
      document.querySelector('.card').style.padding = '24px 20px';
      document.querySelector('.brand-header').style.marginBottom = '20px';
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –±–∞–Ω–∫–æ–≤
      setTimeout(() => {
        generateBankButtons();
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –≤ readonly —Ä–µ–∂–∏–º–µ
        startPaymentTimer();
      }, 100);
      
      console.log('–ü—Ä–∏–º–µ–Ω–µ–Ω —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è');
    }

    function convertFormToReadonly() {
      // –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤—ã–µ readonly –ø–æ–ª—è –≤–º–µ—Å—Ç–æ –∏–Ω–ø—É—Ç–æ–≤
      
      // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (–≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å —Ç–∞–π–º–µ—Ä–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ)
      if ($purpose.value.trim()) {
        const purposeReadonly = createReadonlyField('–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞', $purpose.value, false, true);
        $purpose.parentElement.replaceWith(purposeReadonly);
      } else {
        // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–µ —Å –ø—É—Å—Ç—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, –Ω–æ —Å —Ç–∞–π–º–µ—Ä–æ–º
        const purposeReadonly = createReadonlyField('–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞', '–ù–µ —É–∫–∞–∑–∞–Ω–æ', false, true);
        $purpose.parentElement.replaceWith(purposeReadonly);
      }
      
      // –†–µ–∫–≤–∏–∑–∏—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω/–∫–∞—Ä—Ç–∞) —Å –∫–Ω–æ–ø–∫–æ–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
      const accountReadonly = createReadonlyField('–†–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è', $account.value, true);
      $account.parentElement.replaceWith(accountReadonly);
      
      // –°—É–º–º–∞ —Å –∫–Ω–æ–ø–∫–æ–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
      const amountReadonly = createReadonlyField('–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ', `${$amount.value} ‚ÇΩ`, true);
      $amount.parentElement.replaceWith(amountReadonly);
      
      // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
      $paymentTimer.parentElement.style.display = 'none';
      document.querySelector('.checkbox-wrapper').style.display = 'none';
    }

    function createReadonlyField(label, value, withCopyButton = false, withTimer = false) {
      const fieldDiv = document.createElement('div');
      fieldDiv.className = 'field-group readonly-field';
      
      const labelContainer = document.createElement('div');
      labelContainer.className = 'field-label-container';
      
      const fieldLabel = document.createElement('div');
      fieldLabel.className = 'field-label';
      fieldLabel.textContent = label;
      labelContainer.appendChild(fieldLabel);
      
      // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –≤ —Å—Ç—Ä–æ–∫—É —Å –ª–µ–π–±–ª–æ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
      if (withTimer) {
        const timerDiv = document.createElement('div');
        timerDiv.className = 'inline-timer';
        timerDiv.id = 'inline-timer-display';
        timerDiv.innerHTML = `
          <span class="inline-timer-text" id="inline-timer-text">15:00</span>
          <span class="inline-timer-label">–æ—Å—Ç–∞–ª–æ—Å—å</span>
        `;
        labelContainer.appendChild(timerDiv);
      }
      
      const valueContainer = document.createElement('div');
      valueContainer.className = 'readonly-value-container';
      
      const valueDiv = document.createElement('div');
      valueDiv.className = 'readonly-value';
      valueDiv.textContent = value;
      
      valueContainer.appendChild(valueDiv);
      
      if (withCopyButton) {
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å';
        copyBtn.title = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞';
        copyBtn.addEventListener('click', () => {
          navigator.clipboard.writeText(value.replace(' ‚ÇΩ', '')).then(() => {
            const originalText = copyBtn.textContent;
            copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            copyBtn.style.color = 'var(--success)';
            setTimeout(() => {
              copyBtn.textContent = originalText;
              copyBtn.style.color = '';
            }, 2000);
          });
        });
        valueContainer.appendChild(copyBtn);
      }
      
      fieldDiv.appendChild(labelContainer);
      fieldDiv.appendChild(valueContainer);
      
      return fieldDiv;
    }

    function generateBankButtons() {
      const acct = $account.value.trim();
      const amt = $amount.value.trim();
      if (!acct || !amt) return;

      // –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–Ω–æ–ø–∫–∏
      $banksWrap.innerHTML = '';

      const device = getDeviceInfo();

      Object.entries(BANKS).forEach(([code, cfg]) => {
        const btn = document.createElement('button');
        btn.className = `bank-btn ${cfg.css}`;
        
        // –î–ª—è –≤—Å–µ—Ö –±–∞–Ω–∫–æ–≤ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç "–û–ø–ª–∞—Ç–∏—Ç—å —Å"
        const buttonText = '–û–ø–ª–∞—Ç–∏—Ç—å —Å';
        
        btn.innerHTML = `
          <div class="bank-btn-content">
            <span class="bank-btn-text">${buttonText}</span>
            <object data="${cfg.icon}" type="image/svg+xml"></object>
          </div>
        `;
        
        btn.addEventListener('click', () => handleBankClick(code));
        $banksWrap.appendChild(btn);
      });
    }

    // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è iOS Safari - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞
    function fixIOSScrolling() {
      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
      if (isIOS) {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –≤—ã—Å–æ—Ç—ã viewport
        const setVH = () => {
          const vh = window.innerHeight * 0.01;
          document.documentElement.style.setProperty('--vh', `${vh}px`);
        };
        
        setVH();
        window.addEventListener('resize', setVH);
        window.addEventListener('orientationchange', setVH);
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ input
        document.addEventListener('focusin', (e) => {
          if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') {
            setTimeout(() => {
              window.scrollTo(0, 0);
            }, 100);
          }
        });
      }
    }

    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –∏–∑ URL –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    fillFormFromUrl();

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    updateDeviceHint();

    // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –Ω–∞ iOS
    fixIOSScrolling();

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    showConversionElements();

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    updateCopyLinkButton($account.value.trim(), $amount.value.trim());

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    function showConversionElements() {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
      updateProgress();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
    function updateProgress() {
      const fields = [$purpose, $account, $amount];
      const filledFields = fields.filter(field => field.value.trim() !== '').length;
      const progress = Math.round((filledFields / fields.length) * 100);
      
      const progressIndicator = document.getElementById('progress-indicator');
      const progressBar = document.getElementById('progress-bar');
      const generateBtn = document.getElementById('generate-btn');
      
      if (progress > 0) {
        progressIndicator.style.display = 'block';
        progressBar.style.width = progress + '%';
      } else {
        progressIndicator.style.display = 'none';
      }

      // –ê–Ω–∏–º–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ 100% –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏
      if (progress === 100) {
        generateBtn.style.animation = 'pulse-ready 1s infinite';
        generateBtn.innerHTML = '–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É';
      } else if (progress >= 67) {
        generateBtn.style.animation = 'none';
        generateBtn.innerHTML = '–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É';
      } else {
        generateBtn.style.animation = 'none';
        generateBtn.innerHTML = '–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É';
      }
    }



    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞
    let paymentTimerInterval = null;
    let timeRemaining = 0;

    // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –æ–ø–ª–∞—Ç—ã
    function startPaymentTimer() {
      const minutes = parseInt($paymentTimer.value);
      const inlineTimer = getInlineTimer();
      
      if (minutes === 0) {
        if (inlineTimer) inlineTimer.style.display = 'none';
        return;
      }

      timeRemaining = minutes * 60; // –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ —Å–µ–∫—É–Ω–¥—ã
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–ª–∞–π–Ω —Ç–∞–π–º–µ—Ä —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–≤ readonly —Ä–µ–∂–∏–º–µ)
      if (inlineTimer) {
        inlineTimer.style.display = 'block';
        inlineTimer.classList.remove('timer-expired');
      }

      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
      if (paymentTimerInterval) {
        clearInterval(paymentTimerInterval);
      }

      // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É
      updateTimerDisplay();

      // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª
      paymentTimerInterval = setInterval(() => {
        timeRemaining--;
        updateTimerDisplay();

        if (timeRemaining <= 0) {
          clearInterval(paymentTimerInterval);
          const currentInlineTimer = getInlineTimer();
          const currentInlineTimerText = getInlineTimerText();
          
          if (currentInlineTimer) {
            currentInlineTimer.classList.add('timer-expired');
          }
          if (currentInlineTimerText) {
            currentInlineTimerText.textContent = '–ò–°–¢–ï–ö–õ–û';
          }
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
          setTimeout(() => {
            alert('‚è∞ –í—Ä–µ–º—è –Ω–∞ –æ–ø–ª–∞—Ç—É –∏—Å—Ç–µ–∫–ª–æ! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –æ–ø–ª–∞—Ç—ã.');
          }, 500);
        }
      }, 1000);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
    function updateTimerDisplay() {
      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      const inlineTimerText = getInlineTimerText();
      if (inlineTimerText) {
        inlineTimerText.textContent = timeString;
      }
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞
    function stopPaymentTimer() {
      if (paymentTimerInterval) {
        clearInterval(paymentTimerInterval);
        paymentTimerInterval = null;
      }
      const inlineTimer = getInlineTimer();
      if (inlineTimer) {
        inlineTimer.style.display = 'none';
      }
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ disabled —Ä–µ–∂–∏–º)
    const params = getUrlParams();
    if (!params.disable) {
      $purpose.addEventListener('input', () => {
        updateUrlParams();
        updateProgress();
      });
      $account.addEventListener('input', () => {
        updateUrlParams();
        updateProgress();
      });
      $amount.addEventListener('input', () => {
        updateUrlParams();
        updateProgress();
      });
      $tinkoffMember.addEventListener('change', updateUrlParams);
      $paymentTimer.addEventListener('change', updateUrlParams);
      $transborder.addEventListener('change', updateUrlParams);
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏
    $copyLinkBtn.addEventListener('click', copyCurrentLink);

    document.getElementById('generate-btn').addEventListener('click', () => {
      const acct = $account.value.trim();
      const amt = $amount.value.trim();
      if (!acct || !amt) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞/–∫–∞—Ä—Ç—ã –∏ —Å—É–º–º—É');
        return;
      }

      // –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–Ω–æ–ø–∫–∏
      $banksWrap.innerHTML = '';

      const device = getDeviceInfo();

      Object.entries(BANKS).forEach(([code, cfg]) => {
        const btn = document.createElement('button');
        btn.className = `bank-btn ${cfg.css}`;
        
        // –î–ª—è –≤—Å–µ—Ö –±–∞–Ω–∫–æ–≤ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç "–û–ø–ª–∞—Ç–∏—Ç—å —Å"
        const buttonText = '–û–ø–ª–∞—Ç–∏—Ç—å —Å';
        
        btn.innerHTML = `
          <div class="bank-btn-content">
            <span class="bank-btn-text">${buttonText}</span>
            <object data="${cfg.icon}" type="image/svg+xml"></object>
          </div>
        `;
        
        btn.addEventListener('click', () => handleBankClick(code));
        $banksWrap.appendChild(btn);
      });

      // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –æ–ø–ª–∞—Ç—ã
      startPaymentTimer();
    });

    // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
    let isProcessingClick = false;

    function handleBankClick(bank) {
      // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π
      if (isProcessingClick) {
        console.log('üõ°Ô∏è –ö–ª–∏–∫ —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫');
        return;
      }
      
      isProcessingClick = true;
      console.log(`üè¶ –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∏–∫–∞ –ø–æ –±–∞–Ω–∫—É: ${bank}`);

      // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –°–±–µ—Ä –∏ —Å—Ç–æ–∏—Ç —á–µ–∫–±–æ–∫—Å ¬´—Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã–π¬ª ‚Äì –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–æ–¥ –±–∞–Ω–∫–∞
      const effectiveBank = bank === 'ru_sberbank' && $transborder.checked ? 'ru_sberbank_trans' : bank;

      const baseParams = {
        phone: $account.value.trim(),
        amount: $amount.value.trim(),
        bankMemberId: $tinkoffMember.value,
        isTransborder: $transborder.checked
      };

      const device = getDeviceInfo();
      
      // –î–ª—è desktop —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø—Ä–æ–±—É–µ–º —Å–Ω–∞—á–∞–ª–∞ HTTPS-—Å—Å—ã–ª–∫—É
      if (device.platform === 'desktop') {
        const desktopLink = generateDesktopLink({
          phone: baseParams.phone,
          bank: effectiveBank,
          isTransborder: baseParams.isTransborder
        });

        if (desktopLink) {
          console.log(`Desktop: –æ—Ç–∫—Ä—ã–≤–∞–µ–º HTTPS-—Å—Å—ã–ª–∫—É –¥–ª—è ${effectiveBank}:`, desktopLink);
          window.open(desktopLink, '_blank');
          isProcessingClick = false;
          return;
        } else {
          // –ï—Å–ª–∏ –Ω–µ—Ç desktop-—Å—Å—ã–ª–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–±–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
          console.log(`Desktop: ${effectiveBank} –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç web-—Ñ–æ—Ä–º—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é`);
          showDesktopInfo(baseParams);
          isProcessingClick = false;
          return;
        }
      }

      // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º deeplink-–ª–æ–≥–∏–∫—É
      console.log(`üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${device.platform}, –±–∞–Ω–∫: ${effectiveBank}`);

      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–∞–Ω–∫–∞
      const allLinks = generateDeepLinks({...baseParams, bank: effectiveBank});
      
      // –õ–æ–≥–∏—Ä—É–µ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –ê–±—Ö–∞–∑–∏–∏
      if (effectiveBank === 'ru_sberbank_trans') {
        console.log(`üß™ –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ${allLinks.length} —Å—Å—ã–ª–æ–∫ –¥–ª—è —Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤`);
        console.log('üìã –ü–µ—Ä–≤—ã–µ 10 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫:');
        allLinks.slice(0, 10).forEach((link, i) => {
          console.log(`   ${i+1}. ${link}`);
        });
        if (allLinks.length > 10) {
          console.log(`   ... –∏ –µ—â–µ ${allLinks.length - 10} —Å—Å—ã–ª–æ–∫`);
        }
      }
      
      console.log(`üîó –ü—Ä–æ–±—É–µ–º –≤—Å–µ ${allLinks.length} —Å—Å—ã–ª–æ–∫ –ø–æ –ø–æ—Ä—è–¥–∫—É –¥–ª—è ${effectiveBank}`);
      attemptLinks(allLinks, effectiveBank);
    }

    // –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å –∫–∞–∂–¥—É—é —Å—Å—ã–ª–∫—É –ø–æ –æ—á–µ—Ä–µ–¥–∏, –ø–æ–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
    function attemptLinks(links, currentBank) {
      let idx = 0;
      let isFinished = false; // –§–ª–∞–≥ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–±–æ—Ä–∞
      const device = getDeviceInfo();

      const cleanupAndFinish = () => {
        isFinished = true;
        isProcessingClick = false; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞
        console.log(`üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è ${currentBank}`);
      };

      const tryNext = () => {
        if (isFinished || idx >= links.length) {
          if (!isFinished) {
            console.log(`‚ùå –í—Å–µ ${links.length} —Å—Å—ã–ª–æ–∫ –ø–µ—Ä–µ–ø—Ä–æ–±–æ–≤–∞–Ω—ã –¥–ª—è ${currentBank}, –Ω–∏ –æ–¥–Ω–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞`);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            setTimeout(() => {
              const bankName = BANKS[currentBank]?.label || currentBank;
              alert(`üè¶ –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ${bankName}.\n\nüí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:\n‚Ä¢ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ\n‚Ä¢ –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π –±–∞–Ω–∫.`);
            }, 500);
          }
          cleanupAndFinish();
          return;
        }
        
        const url = links[idx++];
        console.log(`üîó –ü–æ–ø—ã—Ç–∫–∞ ${idx}/${links.length}: ${url}`);

        let timeoutId;
        let appOpened = false;

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const onBlur = () => {
          if (!appOpened && !isFinished) {
            appOpened = true;
            clearTimeout(timeoutId);
            
            console.log(`‚úÖ –£–°–ü–ï–•! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ${currentBank} –æ—Ç–∫—Ä—ã—Ç–æ –ø–æ —Å—Å—ã–ª–∫–µ: ${url}`);
            
            // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            window.removeEventListener('blur', onBlur);
            window.removeEventListener('focus', onFocus);
            
            cleanupAndFinish();
          }
        };

        const onFocus = () => {
          if (appOpened) {
            console.log(`‚Ü©Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—É–ª—Å—è –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ${currentBank}`);
          }
        };

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        window.addEventListener('blur', onBlur);
        window.addEventListener('focus', onFocus);

        // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –∫–∞–∫ –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–º–µ—Ä–µ
        if (device.isIOS) {
          // –ù–∞ iOS - –ø—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ—Ö–æ–¥
          window.location.href = url;
          
          // –ï—Å–ª–∏ —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –º—ã –≤—Å–µ –µ—â–µ –∑–¥–µ—Å—å - –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â—É—é
          timeoutId = setTimeout(() => {
            if (!isFinished && !appOpened) {
              console.log(`‚ùå iOS: –°—Ö–µ–º–∞ ${idx}/${links.length} –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â—É—é...`);
              window.removeEventListener('blur', onBlur);
              window.removeEventListener('focus', onFocus);
              tryNext();
            }
          }, 1500);
          
        } else {
          // –ù–∞ Android - iframe
          const iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.src = url;
          document.body.appendChild(iframe);
          
          timeoutId = setTimeout(() => {
            iframe.remove();
            if (!isFinished && !appOpened) {
              console.log(`‚ùå Android: –°—Ö–µ–º–∞ ${idx}/${links.length} –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â—É—é...`);
              window.removeEventListener('blur', onBlur);
              window.removeEventListener('focus', onFocus);
              tryNext();
            }
          }, 2000);
        }
      };

      tryNext();
    }
  </script>
</body>
</html> 